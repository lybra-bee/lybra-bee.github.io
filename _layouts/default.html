<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêù</text></svg>" type="image/svg+xml">
</head>
<body class="{% if site.dark_mode or page.dark_mode %}dark-mode{% endif %}">
  <header class="hero">
    <div class="hero-content">
      <h1>{{ page.title | default: site.title }}</h1>
      {% if page.description %}<p>{{ page.description }}</p>{% endif %}
      <nav class="nav-menu">
        <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/articles/" class="nav-link">–°—Ç–∞—Ç—å–∏</a>
        <a href="/about/" class="nav-link">–û–±–æ –º–Ω–µ</a>
        <a href="/gallery/" class="nav-link">–ì–∞–ª–µ—Ä–µ—è</a>
      </nav>
      <button id="theme-toggle" class="theme-toggle btn btn-outline-light mt-3">
        {% if site.dark_mode or page.dark_mode %}–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞{% else %}–¢–µ–º–Ω–∞—è —Ç–µ–º–∞{% endif %}
      </button>
    </div>
  </header>
  <main>
    {{ content }}
  </main>
  <footer class="footer">
    <p>&copy; {{ site.time | date: '%Y' }} Lybra Bee. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
    document.getElementById('theme-toggle').addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
      this.textContent = document.body.classList.contains('dark-mode') ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
    });

    // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (–ø–æ–ø–∞—Ä–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ —Å —Ä–∞–∑—ä–µ–∑–¥–æ–º)
    document.addEventListener('DOMContentLoaded', () => {
      const textElement = document.querySelector('.spread-text');
      if (textElement) {
        const spans = textElement.querySelectorAll('span');
        let pairIndex = 0;

        function resetAnimation() {
          spans.forEach(span => {
            span.style.opacity = '0';
            span.style.transform = 'translateX(0)';
            span.style.transition = 'none'; // –°–±—Ä–æ—Å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
          });
          setTimeout(() => {
            spans.forEach(span => {
              span.style.transition = 'opacity 0.3s ease, transform 0.6s ease'; // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
            });
          }, 10);
        }

        function animateGather() {
          console.log(`Gathering pair at index ${pairIndex}`);
          if (pairIndex < Math.ceil(spans.length / 2)) {
            const leftIndex = pairIndex;
            const rightIndex = spans.length - 1 - pairIndex;
            if (leftIndex < spans.length) {
              spans[leftIndex].style.opacity = '1';
              spans[leftIndex].style.transform = 'translateX(0)'; // –ü–æ—è–≤–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ
            }
            if (rightIndex >= 0 && rightIndex !== leftIndex) {
              spans[rightIndex].style.opacity = '1';
              spans[rightIndex].style.transform = 'translateX(0)'; // –ü–æ—è–≤–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ
            }
            pairIndex++;
            if (pairIndex <= Math.ceil(spans.length / 2)) {
              setTimeout(animateGather, 300); // –ò–Ω—Ç–µ—Ä–≤–∞–ª 0.3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –ø–æ–ø–∞—Ä–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
            } else {
              console.log('Gathering completed');
              setTimeout(animateSpread, 500); // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–∞–∑—ä–µ–∑–¥—É
            }
          }
        }

        function animateSpread() {
          console.log(`Spreading pair at index ${pairIndex - 1}`);
          if (pairIndex > 0) {
            const leftIndex = pairIndex - 1;
            const rightIndex = spans.length - pairIndex;
            const totalWidth = textElement.offsetWidth;
            const spanWidth = spans[0].offsetWidth;
            if (leftIndex < spans.length) {
              const targetOffset = (leftIndex * spanWidth) - (spans.length * spanWidth / 2) + (spanWidth / 2);
              spans[leftIndex].style.transform = `translateX(${targetOffset}px)`;
            }
            if (rightIndex >= 0 && rightIndex !== leftIndex) {
              const targetOffset = (rightIndex * spanWidth) - (spans.length * spanWidth / 2) + (spanWidth / 2);
              spans[rightIndex].style.transform = `translateX(${targetOffset}px)`;
            }
            pairIndex--;
            if (pairIndex > 0) {
              setTimeout(animateSpread, 300); // –ò–Ω—Ç–µ—Ä–≤–∞–ª 0.3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Ä–∞–∑—ä–µ–∑–¥–∞
            } else {
              console.log('Spreading completed');
              setTimeout(loopAnimation, 1000); // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º
            }
          }
        }

        function loopAnimation() {
          pairIndex = 0;
          resetAnimation();
          setTimeout(animateGather, 500); // –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        resetAnimation();
        animateGather();
        console.log('Text animation initialized, total spans:', spans.length);
      } else {
        console.log('Text animation element not found');
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ (–æ—Å—Ç–∞–≤–∏–º –ø–æ–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
      const carousel = document.getElementById('articlesCarousel');
      if (carousel) {
        const carouselInstance = new bootstrap.Carousel(carousel, {
          interval: 3000,
          ride: 'carousel'
        });
        console.log('Carousel initialized');
      } else {
        console.log('Carousel element not found');
      }
    });
  </script>
</body>
</html>
