<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêù</text></svg>" type="image/svg+xml">
  <style>
    .spread-text {
      display: inline-block;
      position: relative;
      font-size: 2em;
      color: #00e5ff;
      white-space: nowrap;
    }
    .spread-text span {
      position: absolute;
      opacity: 0;
      transform: translateX(-50%);
    }
  </style>
</head>
<body class="{% if site.dark_mode or page.dark_mode %}dark-mode{% endif %}">
  <header class="hero">
    <div class="hero-content">
      <h1>{{ page.title | default: site.title }}</h1>
      {% if page.description %}<p>{{ page.description }}</p>{% endif %}
      <nav class="nav-menu">
        <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/articles/" class="nav-link">–°—Ç–∞—Ç—å–∏</a>
        <a href="/about/" class="nav-link">–û–±–æ –º–Ω–µ</a>
        <a href="/gallery/" class="nav-link">–ì–∞–ª–µ—Ä–µ—è</a>
      </nav>
      <button id="theme-toggle" class="theme-toggle btn btn-outline-light mt-3">
        {% if site.dark_mode or page.dark_mode %}–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞{% else %}–¢–µ–º–Ω–∞—è —Ç–µ–º–∞{% endif %}
      </button>
    </div>
  </header>

  <main>
    {{ content }}
  </main>

  <footer class="footer">
    <p>&copy; {{ site.time | date: '%Y' }} Lybra Bee. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <script>
    document.getElementById('theme-toggle').addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
      this.textContent = document.body.classList.contains('dark-mode') ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
    });

    // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞: –±—É–∫–≤—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ–ø–∞—Ä–Ω–æ –≤ —Ü–µ–Ω—Ç—Ä–µ –∏ —Ä–∞–∑—ä–µ–∑–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Å—Ç–∞–º
    document.addEventListener('DOMContentLoaded', () => {
      const textElement = document.querySelector('.spread-text');
      if (!textElement) return;

      const spans = textElement.querySelectorAll('span');
      const centerX = textElement.offsetWidth / 2;

      // –≤—ã—á–∏—Å–ª—è–µ–º –∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
      const positions = [];
      let currentX = 0;
      spans.forEach(span => {
        const w = span.offsetWidth || 16; // –∑–∞–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        positions.push(currentX);
        currentX += w;
      });
      const totalWidth = currentX;
      const offsetStart = centerX - totalWidth / 2;

      let pairIndex = 0;

      function reset() {
        spans.forEach(span => {
          span.style.opacity = '0';
          span.style.left = centerX + 'px';
          span.style.transform = 'translateX(-50%)';
          span.style.transition = 'none';
        });
      }

      function showPairs() {
        const left = pairIndex;
        const right = spans.length - 1 - pairIndex;

        if (left > right) {
          pairIndex = 0;
          setTimeout(spreadToFinal, 500);
          return;
        }

        [left, right].forEach(i => {
          if (spans[i]) {
            spans[i].style.opacity = '1';
          }
        });

        pairIndex++;
        setTimeout(showPairs, 200);
      }

      function spreadToFinal() {
        spans.forEach((span, i) => {
          span.style.transition = 'all 1s ease';
          span.style.left = offsetStart + positions[i] + 'px';
          span.style.transform = 'translateX(0)';
        });
        setTimeout(loop, 3000);
      }

      function loop() {
        spans.forEach(span => {
          span.style.transition = 'none';
        });
        reset();
        setTimeout(showPairs, 500);
      }

      // —Å—Ç–∞—Ä—Ç —Ü–∏–∫–ª–∞
      reset();
      showPairs();
    });
  </script>
</body>
</html>
