name: ðŸ¤– AI Content Generation

on:
  workflow_dispatch:  # Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°
  schedule:
    - cron: '0 12 * * 1'  # ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº Ð² 12:00 UTC

jobs:
  generate-content:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ›Žï¸ Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0

      - name: ðŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ðŸ“¦ Install dependencies
        run: pip install requests

      - name: ðŸ“ Create directories
        run: |
          echo "Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¿Ð°Ð¿Ð¾Ðº..."
          mkdir -p content/posts
          echo "Ð¢ÐµÐºÑƒÑ‰Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°:"
          ls -la
          ls -la content/ || echo "ÐÐµÑ‚ content dir"

      - name: ðŸ§ª Create test article
        run: |
          echo "Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ ÑÑ‚Ð°Ñ‚ÑŒÑŽ..."
          cat > content/posts/test-manual-article.md << 'EOF'
---
title: "Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ñ€ÑƒÑ‡Ð½Ð°Ñ ÑÑ‚Ð°Ñ‚ÑŒÑ"
date: 2024-01-20T10:00:00+03:00
draft: false
description: "Ð¡Ñ‚Ð°Ñ‚ÑŒÑ ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· workflow"
tags: ["Ñ‚ÐµÑÑ‚", "Ñ€ÑƒÑ‡Ð½Ð°Ñ"]
---

## Ð­Ñ‚Ð¾ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð°Ñ ÑÑ‚Ð°Ñ‚ÑŒÑ

Ð­Ñ‚Ð° ÑÑ‚Ð°Ñ‚ÑŒÑ Ð±Ñ‹Ð»Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· GitHub Actions workflow Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.

Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð²Ð¸Ð´Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ‚ Ñ‚ÐµÐºÑÑ‚ - Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!

*Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: $(date)*
EOF

          echo "Ð¤Ð°Ð¹Ð» ÑÐ¾Ð·Ð´Ð°Ð½! ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼:"
          ls -la content/posts/
          cat content/posts/test-manual-article.md

      - name: ðŸ’¾ Commit changes
        run: |
          echo "Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² git..."
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          
          git add content/posts/test-manual-article.md
          
          if git diff --staged --quiet; then
            echo "ÐÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð°"
          else
            git commit -m "ðŸ¤– Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ñ‚ÐµÑÑ‚Ð¾Ð²Ð°Ñ ÑÑ‚Ð°Ñ‚ÑŒÑ Ñ‡ÐµÑ€ÐµÐ· workflow"
            git push
            echo "âœ… Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿ÑƒÑˆÐµÐ½Ñ‹ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!"
          fi

      - name: ðŸ“‹ Final check
        run: |
          echo "=== Ð¤Ð˜ÐÐÐ›Ð¬ÐÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ==="
          echo "Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ content/posts/:"
          ls -la content/posts/ || echo "ÐŸÐ°Ð¿ÐºÐ° Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚"
          echo "Ð¤Ð°Ð¹Ð»Ñ‹ Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸:"
          find . -name "*.md" -type f | head -10
