---
layout: post
title: "Урок 2. Stable Diffusion от А до Я — первое изображение за 10 минут"
date: 2025-11-28 
categories: uroki
lesson_number: 2
level: Новичок
duration: 60–90 минут
goal: "Запустить Stable Diffusion в браузере и создать свои первые ИИ-картинки"
result: "Вечный генератор изображений в твоём Google Drive"
image: /assets/images/lessons/image-8.jpg
image_alt: "Первое изображение, созданное тобой"
tags: [stable-diffusion, colab, генерация, искусство]
---


# Урок 2. Stable Diffusion от А до Я  
Самый полный гайд 2025 года для новичков и не только

Сегодня ты получишь в руки самую мощную открытую модель генерации изображений, которая работает бесплатно и без установки.

<br>

### Готовая кнопка — запуск одной кликом

<a href="https://colab.research.google.com/drive/1T5f5iN7d2rK8v9mXz1pQb3cR4sT6uV7w?usp=sharing" target="_blank" class="btn btn-success btn-lg mb-4">
  Запустить Stable Diffusion в Google Colab прямо сейчас (вечная ссылка)
</a>

(или копируй код ниже в любой новый ноутбук)

<br>

### Полный код урока (одна ячейка — просто нажми ▶️)

```python
# ╔════════════════════════════════════════════════════════════════════╗
# ║   STABLE DIFFUSION В COLAB — УРОК 2 (максимальная версия, ноябрь 2025) ║
# ╚════════════════════════════════════════════════════════════════════╝

# 1. Установка (2–5 минут один раз)
!pip install -q diffusers==0.30.3 transformers accelerate ftfy bitsandbytes==0.43.3 --extra-index-url https://pypi.org/simple
!pip install -q torch==2.3.0+cu121 torchvision --extra-index-url https://download.pytorch.org/whl/cu121

import torch
from diffusers import StableDiffusionPipeline, StableDiffusionXLPipeline, FluxPipeline
from IPython.display import display, Markdown

print("Установка завершена! Выбирай модель ниже")

# ────────────────────────────── Вариант А — классика (самый быстрый и стабильный)
pipe = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16,
    safety_checker=None,
    requires_safety_checker=False
)
pipe = pipe.to("cuda")
pipe.enable_attention_slicing()  # экономия памяти

# ────────────────────────────── Вариант Б — SDXL (максимум качества)
# Раскомментируй эти строки и закомментируй блок А
# pipe = StableDiffusionXLPipeline.from_pretrained(
#     "stabilityai/stable-diffusion-xl-base-1.0",
#     torch_dtype=torch.float16,
#     variant="fp16"
# )
# pipe = pipe.to("cuda")

# ────────────────────────────── Вариант В — Flux.1-dev (новейшая, ультра-реализм)
# pipe = FluxPipeline.from_pretrained(
#     "black-forest-labs/FLUX.1-dev",
#     torch_dtype=torch.bfloat16
# )
# pipe.enable_model_cpu_offload()

# ────────────────────────────── Твой промпт (меняй сколько угодно!)
prompt = "красивая русская девушка в киберпанк-городе ночью, неоновые вывески на кириллице, мокрый асфальт, отражения, дождь, кинематографично, высокая детализация, 8k, шедевр"

negative_prompt = "размыто, уродливо, артефакты, лишние конечности, плохая анатомия, водяной знак, текст, подпись"

image = pipe(
    prompt,
    negative_prompt=negative_prompt,
    num_inference_steps=30,
    guidance_scale=7.5,
    height=768,
    width=768
).images[0]

display(image)
print("Готово! Меняй prompt и запускай снова — без ограничений")
---
Как это работает (по-человечески, без формул)

Модель начинает с чистого телевизионного шума
За 20–50 шагов постепенно «вычитает» шум
На каждом шаге нейросеть спрашивает: «А похоже ли это на то, что написано в промпте?»
Когда шум полностью исчез — остаётся твоя идеальная картинка

Всё происходит в облаке Google на видеокарте T4 16 ГБ — твой ноутбук может быть даже выключен.
---
<br>

### 15 лайфхаков для идеальных промптов (2025)

- Пиши на русском — модель понимает лучше, чем на английском  
- Указывай стиль: «в стиле Ван Гога», «аниме 90-х», «фотография на плёнку», «кинематографично», «рендер в Unreal Engine 5»  
- Добавляй качество: «8k», «ультра детализация», «masterpiece», «best quality», «highly detailed»  
- Используй negative prompt — это важнее, чем кажется!  
- Управляй светом: «золотой час», «неон ночью», «мягкий свет из окна», «драматическое освещение»  
- Добавляй эмоции: «грустная», «мечтательная», «восторженная», «загадочная улыбка»  
- Указывай ракурс: «портрет крупным планом», «вид сзади», «снизу вверх», «голландский угол»  
- Управляй композицией: «правило третей», «центральная симметрия», «минимализм»  
- Добавляй окружение: «в древней библиотеке», «на Марсе во время заката», «в токийском метро в час пик»  
- Указывай возраст и этнос: «девушка 20 лет», «славянская внешность», «азиатские черты лица»  
- Добавляй одежду и детали: «в кожаной куртке», «в киберпанковском плаще», «с неоновыми татуировками»  
- Экспериментируй с соотношением: 1:1, 16:9, 9:16, 4:3, 2:3  
- Используй веса: (слово:1.3) — усиливает, ((слово)) — ещё сильнее  
- Сохраняй лучшие промпты в отдельный .txt файл — через месяц у тебя будет своя база  
- Делай цепочки: «девушка, портрет, крупный план, 8k, шедевр, (кинематографично:1.4)»

<br>

### Домашнее задание (обязательное и очень приятное)

- Сгенерируй минимум 15 изображений  
- Одно должно быть максимально безумным (пример: «кот в костюме космонавта пьёт кофе на Луне, ретро-футуризм 60-х, 8k»)  
- Сделай серию из 3–5 картинок в одном стиле (например, «киберпанк-Москва 2077»)  
- Сохрани три лучшие в максимальном качестве  
- Выложи в сторис / пост / Telegram-канал с хештегом #МойПервыйStableDiffusion  
- По желанию — напиши промпт в описании  

Я лично посмотрю ВСЕ работы и выберу 7 победителей. Призы:  
- Ранний доступ к закрытому уроку по обучению своих LoRA (декабрь)  
- Персональный промпт под твой стиль от меня  
- Упоминание в следующем уроке + репост в канал  

<br>

### Что будет дальше (дорожная карта до конца года)

- 1 декабря — Лайфхак: как генерировать в 5–10 раз быстрее и почти бесплатно  
- 5 декабря — Урок 3: ControlNet — рисуем по своим фото, скетчам и позам  
- 12 декабря — Урок 4: IP-Adapter — «фотошоп» для нейросетей  
- 19 декабря — Урок 5: обучение своих LoRA (создаём свой стиль за 15 минут)  
- 26 декабря — Урок 6: анимация и видео из картинок  
- Январь 2026 — 3D, VR и нейросети следующего поколения  

<br>

### Заключение

Сегодня ты не просто запустил код.  
Ты стал соавтором нового вида искусства.

Сохрани этот ноутбук в свой Google Drive прямо сейчас — он будет работать вечно.  
Через год ты откроешь его, посмотришь на свои первые работы и улыбнёшься:  
«Вот с этого всё началось».

До понедельника,  
твой будущий цифровой соавтор
