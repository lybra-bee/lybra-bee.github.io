<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∞–ª–µ—Ä–µ—è - {{ .Site.Title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    {{ partial "header.html" . }}

    <main class="max-w-5xl mx-auto px-4 py-12">
        <h1 class="text-4xl font-bold text-center mb-12">üñºÔ∏è –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>

        {{ $images := readDir "static/images/posts" }}
        {{ if $images }}
        <div class="relative overflow-hidden">
            <div id="carousel" class="flex transition-transform duration-500">
                {{ range $index, $img := $images }}
                {{ $filename := $img.Name }}
                {{ $title := replace $filename "-" " " | replaceRE `\.[^.]+$` "" }}
                <div class="min-w-full flex-shrink-0 p-2">
                    <img src="/images/posts/{{ $filename }}" alt="{{ $title }}" 
                         class="cursor-pointer rounded-lg shadow-md object-cover w-full h-80"
                         onclick="openModal('/images/posts/{{ $filename }}', '{{ $title }}')">
                    <h3 class="mt-2 text-center font-semibold">{{ $title }}</h3>
                </div>
                {{ end }}
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <button onclick="prev()" class="absolute left-0 top-1/2 -translate-y-1/2 bg-gray-700 bg-opacity-50 text-white px-3 py-2 rounded-r">‚Äπ</button>
            <button onclick="next()" class="absolute right-0 top-1/2 -translate-y-1/2 bg-gray-700 bg-opacity-50 text-white px-3 py-2 rounded-l">‚Ä∫</button>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
        <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 hidden justify-center items-center z-50" onclick="closeModal()">
            <div class="relative">
                <img id="modal-img" src="" alt="" class="max-h-[90vh] max-w-[90vw] rounded-lg shadow-lg">
                <p id="modal-title" class="text-white text-center mt-2"></p>
            </div>
        </div>

        <script>
            let currentIndex = 0;
            const carousel = document.getElementById('carousel');
            const totalItems = carousel.children.length;

            function showCarousel() {
                carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
            }

            function next() {
                currentIndex = (currentIndex + 1) % totalItems;
                showCarousel();
            }

            function prev() {
                currentIndex = (currentIndex - 1 + totalItems) % totalItems;
                showCarousel();
            }

            function openModal(src, title) {
                document.getElementById('modal-img').src = src;
                document.getElementById('modal-title').innerText = title;
                document.getElementById('modal').classList.remove('hidden');
            }

            function closeModal() {
                document.getElementById('modal').classList.add('hidden');
            }
        </script>

        {{ else }}
        <div class="text-center py-12">
            <p class="text-gray-600 text-xl">–ì–∞–ª–µ—Ä–µ—è –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ <code>static/images/posts/</code></p>
        </div>
        {{ end }}
    </main>

    {{ partial "footer.html" . }}
</body>
</html>
