{{ define "main" }}
<section class="articles-carousel">
  <h1>Статьи</h1>
  <div class="carousel-container">
    <div class="carousel-track">
      {{ range .Pages }}
      <div class="carousel-item">
        <a href="{{ .RelPermalink }}">
          <img src="{{ .Params.image }}" alt="{{ .Title }}">
          <div class="carousel-caption">
            <h3>{{ .Title }}</h3>
            <p>{{ .Params.description }}</p>
          </div>
        </a>
      </div>
      {{ end }}
    </div>
  </div>
</section>

<style>
.carousel-container {
  overflow: hidden;
  width: 100%;
  position: relative;
}
.carousel-track {
  display: flex;
  flex-wrap: nowrap;
  transition: transform 0.5s linear;
}
.carousel-item {
  flex: 0 0 auto;
  width: 300px;
  margin-right: 20px;
}
.carousel-item img {
  width: 100%;
  display: block;
  border-radius: 8px;
}
.carousel-caption {
  text-align: center;
  font-size: 0.9rem;
  margin-top: 5px;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const track = document.querySelector('.carousel-track');
  let position = 0;
  const speed = 1; // px per frame
  const fps = 60;

  function animate() {
    position -= speed;
    if (Math.abs(position) >= track.scrollWidth - track.offsetWidth) {
      position = 0;
    }
    track.style.transform = `translateX(${position}px)`;
    requestAnimationFrame(animate);
  }

  if(track) animate();
});
</script>
{{ end }}
